import{d as u,g as p,p as v,q as h,c,F as w,i as k,o as a,a as l,t as r,n as S,_ as b,m as W}from"./index-XP8vVcEu.js";const B={class:"logger"},L={class:"log"},x=u({__name:"Logger",setup(_){const e=p(null),o=p([]),m=window.location.host.replace("5173","8080"),d=window.location.protocol==="https:"?"wss":"ws",i=()=>{e.value=new WebSocket(`${d}://${m}/api/monitoring`),e.value.onopen=f},g=()=>{console.log("[WebSocket] connection closed"),setTimeout(i,1e3)};function f(){console.log("[WebSocket] connection opened"),this.onerror=s=>{console.error("[WebSocket] error",s)},this.onmessage=s=>{const t=JSON.parse(s.data);t.type==="log"&&(o.value.push({...t.data,timestamp:new Date(t.data.timestamp)}),o.value.length>100&&o.value.shift())},this.onclose=g}return v(()=>{i()}),h(()=>{e.value&&(e.value.onclose=null,e.value.close())}),(s,t)=>(a(),c("div",B,[(a(!0),c(w,null,k(o.value,n=>(a(),c("p",L,[l("span",null,r(n.timestamp.toLocaleString()),1),l("span",{class:S(["level",n.level])},r(n.level),3),l("span",null,r(n.message),1)]))),256))]))}}),C=b(x,[["__scopeId","data-v-bb15e70f"]]),y=u({__name:"LoggerView",setup(_){return(e,o)=>(a(),W(C))}});export{y as default};
